(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();fetch("https://restcountries.com/v3.1/all").then(e=>e.json()).then(e=>{const t=document.getElementById("flagGrid");if(!t)return;e.sort((r,a)=>r.name.common.localeCompare(a.name.common)).forEach(r=>{const a=document.createElement("a");a.href=`country.html?name=${r.name.common}`,a.innerHTML=`<img src="${r.flags.png}" alt="${r.name.common}" title="${r.name.common}" class="flag" />`,t.appendChild(a)})}).catch(e=>console.error("Error loading countries:",e));const f="f39143f6af2943898e57538f2d6d3de2";async function E(e){return(await fetch(`https://api.spoonacular.com/recipes/${e}/information?apiKey=${f}&includeNutrition=true`)).json()}async function k(e=7){const t=`https://api.spoonacular.com/recipes/random?number=${e}&apiKey=${f}`;try{const{recipes:n}=await(await fetch(t)).json(),r=await Promise.all(n.map(a=>E(a.id)));I(r)}catch(n){console.error("Failed to fetch weekly recipes:",n)}}function I(e){const t=document.getElementById("weekly-recipes");t&&(t.innerHTML="",e.forEach(n=>{const r=n.nutrition.nutrients.reduce((i,o)=>(["Calories","Protein","Fat","Carbohydrates"].includes(o.name)&&(i[o.name]=`${o.amount}${o.unit}`),i),{}),a=document.createElement("div");a.className="recipe-card",a.innerHTML=`
      <span class="favorite-btn" data-id="${n.id}">❤️</span>
      <h3>${n.title}</h3>
      <img src="${n.image}" alt="${n.title}" />
      <p><strong>Calories:</strong> ${r.Calories||"N/A"}</p>
      <p><strong>Protein:</strong> ${r.Protein||"N/A"}</p>
      <p><strong>Fat:</strong> ${r.Fat||"N/A"}</p>
      <p><strong>Carbs:</strong> ${r.Carbohydrates||"N/A"}</p>
      <button class="view-btn" data-id="${n.id}">View Recipe</button>
    `,t.appendChild(a)}),t.querySelectorAll(".favorite-btn").forEach(n=>n.addEventListener("click",()=>R(n.dataset.id))),t.querySelectorAll(".view-btn").forEach(n=>n.addEventListener("click",()=>L(n.dataset.id))))}function R(e){let t=JSON.parse(localStorage.getItem("bookmarkedRecipes"))||[];t.includes(e)||(t.push(e),localStorage.setItem("bookmarkedRecipes",JSON.stringify(t))),alert("Recipe bookmarked!")}function L(e){localStorage.setItem("selectedRecipeId",e),window.location.href=`recipe.html?id=${e}`}async function S(){const e="recipeOfTheWeek",t=localStorage.getItem("recipeOfTheWeekDate"),n=new Date,r=new Date(n.getTime()-7*24*60*60*1e3);let a;if(!t||new Date(t)<r)try{const c=await fetch(`https://api.spoonacular.com/recipes/random?number=1&apiKey=${f}`),{recipes:v}=await c.json();a=v[0],localStorage.setItem(e,JSON.stringify(a)),localStorage.setItem("recipeOfTheWeekDate",n.toISOString())}catch(c){console.error("Failed to fetch Recipe of the Week:",c);return}else a=JSON.parse(localStorage.getItem(e));const o=document.getElementById("weeklyRecipe");o&&a&&(o.innerHTML=`
      <h2>Recipe of the Week</h2>
      <div class="card">
        <img src="${a.image}" alt="${a.title}">
        <h3>${a.title}</h3>
        <a href="recipe.html?id=${a.id}">View Recipe</a>
      </div>
    `)}document.addEventListener("DOMContentLoaded",()=>{S(),k()});const h="f39143f6af2943898e57538f2d6d3de2";async function N(e="",t=1){const n=`https://api.spoonacular.com/recipes/random?number=${t}&tags=${e}&apiKey=${h}&addRecipeNutrition=true`;return(await(await fetch(n)).json()).recipes}async function C(e){return(await(await fetch(`https://restcountries.com/v3.1/name/${e}`)).json())[0]}async function O(e){const r=`https://api.spoonacular.com/recipes/complexSearch?cuisine=${{afghanistan:"middle eastern",algeria:"african",argentina:"latin american",armenia:"middle eastern",australia:"british",austria:"european",bangladesh:"indian",belgium:"european",brazil:"latin american",canada:"american",chile:"latin american",china:"chinese",colombia:"latin american",croatia:"european",cuba:"caribbean",czechia:"european",denmark:"nordic",dominicanrepublic:"caribbean",egypt:"middle eastern",england:"british",finland:"nordic",france:"french",germany:"german",greece:"greek",guatemala:"latin american",haiti:"caribbean",honduras:"latin american",hungary:"european",india:"indian",indonesia:"asian",iran:"middle eastern",iraq:"middle eastern",ireland:"british",israel:"middle eastern",italy:"italian",jamaica:"caribbean",japan:"japanese",jordan:"middle eastern",kenya:"african",korea:"korean",lebanon:"middle eastern",malaysia:"asian",mexico:"mexican",morocco:"african",nepal:"indian",netherlands:"european",newzealand:"british",nicaragua:"latin american",nigeria:"african",norway:"nordic",pakistan:"indian",peru:"latin american",philippines:"asian",poland:"european",portugal:"mediterranean",puertorico:"caribbean",qatar:"middle eastern",romania:"european",russianfederation:"eastern european",saudiarabia:"middle eastern",senegal:"african",serbia:"european",singapore:"asian",slovakia:"european",slovenia:"european",southafrica:"african",southkorea:"korean",spain:"spanish",srilanka:"indian",sweden:"nordic",switzerland:"european",syria:"middle eastern",thailand:"thai",tunisia:"african",turkey:"mediterranean",ukraine:"eastern european",unitedarabemirates:"middle eastern",unitedkingdom:"british",unitedstates:"american",uruguay:"latin american",venezuela:"latin american",vietnam:"vietnamese",yemen:"middle eastern",zimbabwe:"african"}[e.toLowerCase().replace(/\s+/g,"")]||"world"}&number=6&apiKey=${h}`;return(await(await fetch(r)).json()).results}async function y({query:e="",cuisine:t="",diet:n="",includeIngredients:r=""}){const i=`https://api.spoonacular.com/recipes/complexSearch?${new URLSearchParams({...e&&{query:e},...t&&{cuisine:t},...n&&{diet:n},...r&&{includeIngredients:r},number:6,apiKey:h}).toString()}`;return(await(await fetch(i)).json()).results}const s=document.getElementById("dietFilter"),u=document.getElementById("weeklyBtn"),l=document.getElementById("countryFilter"),w=document.getElementById("searchInput"),m=document.getElementById("searchBtn"),d=document.getElementById("categorySelect"),p=document.getElementById("filterForm");s==null||s.addEventListener("change",()=>b(s.value));u==null||u.addEventListener("click",()=>b("",7));l==null||l.addEventListener("change",async()=>{const e=l.value;if(e)try{const t=await C(e);M(t);const n=await O(e);B(n)}catch(t){console.error("Error loading country data:",t)}});d==null||d.addEventListener("change",()=>{const e=d.value;if(e){const t=`https://www.blogilates.com/category/${e}/`;window.open(t,"_blank")}});m==null||m.addEventListener("click",async()=>{const e=w.value.trim();if(!e)return alert("Please enter a search keyword");const t=await y({query:e});$(t)});p==null||p.addEventListener("submit",async e=>{var i;e.preventDefault();const t=w.value.trim(),n=l.value,r=s.value,a=(i=document.getElementById("inclIngredients"))==null?void 0:i.value.trim();if(!t&&!n&&!r&&!a){alert("Please provide at least one filter to search.");return}try{const o=await y({query:t,cuisine:n,diet:r,includeIngredients:a});$(o)}catch(o){console.error("Error fetching filtered recipes:",o)}});async function b(e="",t=1){try{const n=await N(e,t);T(n)}catch(n){console.error("Error fetching recipes:",n)}}function T(e){const t=document.getElementById("recipes");t&&(t.innerHTML="",e.forEach(n=>{var i,o;const r={};(o=(i=n.nutrition)==null?void 0:i.nutrients)==null||o.forEach(c=>{r[c.name]=`${c.amount||"N/A"}${c.unit||""}`});const a=document.createElement("div");a.className="recipe-card",a.innerHTML=`
      <span class="favorite-btn" onclick="saveFavorite(${n.id})">❤️</span>
      <h3>${n.title}</h3>
      <img src="${n.image}" alt="${n.title}" width="100%">
      <p><strong>Calories:</strong> ${r.Calories||"N/A"}</p>
      <p><strong>Protein:</strong> ${r.Protein||"N/A"}</p>
      <p><strong>Fat:</strong> ${r.Fat||"N/A"}</p>
      <p><strong>Carbs:</strong> ${r.Carbohydrates||"N/A"}</p>
      <button onclick="viewRecipe(${n.id})">View Recipe</button>
    `,t.appendChild(a)}))}function $(e){const t=document.getElementById("search-results");if(t){if(t.innerHTML="",!(e!=null&&e.length)){t.innerHTML="<p>No recipes found.</p>";return}e.forEach(n=>{const r=document.createElement("div");r.className="recipe-card",r.innerHTML=`
      <h3>${n.title}</h3>
      <img src="${n.image}" alt="${n.title}" width="100%">
      <button onclick="viewRecipe(${n.id})">View Recipe</button>
    `,t.appendChild(r)})}}window.saveFavorite=e=>{const t=JSON.parse(localStorage.getItem("favorites"))||[];t.includes(e)||(t.push(e),localStorage.setItem("favorites",JSON.stringify(t)),alert("Recipe saved to favorites!"))};window.viewRecipe=e=>{localStorage.setItem("selectedRecipeId",e),window.location.href="recipe.html"};var g;(g=document.querySelector(".hamburger"))==null||g.addEventListener("click",()=>{var e;(e=document.getElementById("menu"))==null||e.classList.toggle("show")});function M(e){const t=document.getElementById("country-details");t&&(t.innerHTML=`
    <h4>${e.name.common}</h4>
    <img src="${e.flags.png}" alt="${e.name.common}" width="200">
    <p><strong>Capital:</strong> ${e.capital}</p>
    <p><strong>Region:</strong> ${e.region}</p>
    <p><strong>Population:</strong> ${e.population.toLocaleString()}</p>
  `)}function B(e){const t=document.getElementById("country-recipes");if(t){if(t.innerHTML="",!(e!=null&&e.length)){t.innerHTML="<p>No recipes found for this country.</p>";return}e.forEach(n=>{const r=document.createElement("div");r.className="recipe-card",r.innerHTML=`
      <h3>${n.title}</h3>
      <img src="${n.image}" alt="${n.title}" width="100%">
      <button onclick="viewRecipe(${n.id})">View Recipe</button>
    `,t.appendChild(r)})}}
