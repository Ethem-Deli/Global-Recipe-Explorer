(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function a(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(n){if(n.ep)return;n.ep=!0;const r=a(n);fetch(n.href,r)}})();fetch("https://restcountries.com/v3.1/all").then(e=>e.json()).then(e=>{const t=document.getElementById("flagGrid");if(!t)return;e.sort((i,n)=>i.name.common.localeCompare(n.name.common)).forEach(i=>{const n=document.createElement("a");n.href=`country.html?name=${i.name.common}`,n.innerHTML=`<img src="${i.flags.png}" alt="${i.name.common}" title="${i.name.common}" class="flag" />`,t.appendChild(n)})}).catch(e=>console.error("Error loading countries:",e));async function M(){return await(await fetch("https://www.themealdb.com/api/json/v1/1/random.php")).json()}async function B(e){return await(await fetch(`https://www.themealdb.com/api/json/v1/1/lookup.php?i=${e}`)).json()}async function N(){const e="weeklyRecipe",t=JSON.parse(localStorage.getItem(e))||{},a=Date.now(),i=7*24*60*60*1e3;if(!t.timestamp||a-t.timestamp>i){const r=(await M()).meals[0];localStorage.setItem(e,JSON.stringify({id:r.idMeal,timestamp:a})),$(r)}else{const n=await B(t.id);$(n.meals[0])}}function $(e){const t=document.getElementById("weekly-recipe");t&&(t.innerHTML=`
    <h3>Weekly Pick</h3>
    <img src="${e.strMealThumb}" alt="${e.strMeal}">
    <p>${e.strMeal}</p>
    <button onclick="location.href='recipe.html?id=${e.idMeal}'">View Recipe</button>
  `)}N();const m=document.getElementById("dietFilter"),v=document.getElementById("weeklyBtn"),u=document.getElementById("countryFilter"),E=document.getElementById("searchInput"),k=document.getElementById("searchBtn"),p=document.getElementById("categorySelect");m&&m.addEventListener("change",()=>{I(m.value)});v&&v.addEventListener("click",()=>I("",7));u&&u.addEventListener("change",()=>{const e=u.value;e&&(C(e),R(e))});p&&p.addEventListener("change",()=>{const e=p.value;if(e){const t=`https://www.blogilates.com/category/${e}/`;window.open(t,"_blank")}});k&&E&&k.addEventListener("click",()=>{const e=E.value.trim();e&&j(e)});function I(e="",t=1){const i=`https://api.spoonacular.com/recipes/random?number=${t}&tags=${e}&apiKey=f39143f6af2943898e57538f2d6d3de2&addRecipeNutrition=true`;fetch(i).then(n=>n.json()).then(n=>S(n.recipes)).catch(n=>console.error("Error fetching recipes:",n))}function S(e){const t=document.getElementById("recipes");t&&(t.innerHTML="",e.forEach(a=>{var l,d,f,h,g,y,w,b;const i=((d=(l=a.nutrition)==null?void 0:l.nutrients.find(s=>s.name==="Calories"))==null?void 0:d.amount)||"N/A",n=((h=(f=a.nutrition)==null?void 0:f.nutrients.find(s=>s.name==="Protein"))==null?void 0:h.amount)||"N/A",r=((y=(g=a.nutrition)==null?void 0:g.nutrients.find(s=>s.name==="Fat"))==null?void 0:y.amount)||"N/A",o=((b=(w=a.nutrition)==null?void 0:w.nutrients.find(s=>s.name==="Carbohydrates"))==null?void 0:b.amount)||"N/A",c=document.createElement("div");c.className="recipe-card",c.innerHTML=`
      <span class="favorite-btn" onclick="saveFavorite(${a.id})">❤️</span>
      <h3>${a.title}</h3>
      <img src="${a.image}" alt="${a.title}" width="100%">
      <p><strong>Calories:</strong> ${i}</p>
      <p><strong>Protein:</strong> ${n}g</p>
      <p><strong>Fat:</strong> ${r}g</p>
      <p><strong>Carbs:</strong> ${o}g</p>
    `,t.appendChild(c)}))}window.saveFavorite=e=>{const t=JSON.parse(localStorage.getItem("favorites"))||[];t.includes(e)||(t.push(e),localStorage.setItem("favorites",JSON.stringify(t)),alert("Recipe saved to favorites!"))};var L;(L=document.querySelector(".hamburger"))==null||L.addEventListener("click",()=>{var e;(e=document.getElementById("menu"))==null||e.classList.toggle("show")});function C(e){fetch(`https://restcountries.com/v3.1/name/${e}`).then(t=>t.json()).then(t=>{const a=t[0],i=document.getElementById("country-details");i&&(i.innerHTML=`
        <h4>${a.name.common}</h4>
        <img src="${a.flags.png}" alt="${a.name.common}" width="200">
        <p><strong>Capital:</strong> ${a.capital}</p>
        <p><strong>Region:</strong> ${a.region}</p>
        <p><strong>Population:</strong> ${a.population.toLocaleString()}</p>
      `)}).catch(t=>console.error("Error loading country info:",t))}function R(e){const t={afghanistan:"middle eastern",algeria:"african",argentina:"latin american",armenia:"middle eastern",australia:"british",austria:"european",bangladesh:"indian",belgium:"european",brazil:"latin american",canada:"american",chile:"latin american",china:"chinese",colombia:"latin american",croatia:"european",cuba:"caribbean",czechia:"european",denmark:"nordic",dominicanrepublic:"caribbean",egypt:"middle eastern",england:"british",finland:"nordic",france:"french",germany:"german",greece:"greek",guatemala:"latin american",haiti:"caribbean",honduras:"latin american",hungary:"european",india:"indian",indonesia:"asian",iran:"middle eastern",iraq:"middle eastern",ireland:"british",israel:"middle eastern",italy:"italian",jamaica:"caribbean",japan:"japanese",jordan:"middle eastern",kenya:"african",korea:"korean",lebanon:"middle eastern",malaysia:"asian",mexico:"mexican",morocco:"african",nepal:"indian",netherlands:"european",newzealand:"british",nicaragua:"latin american",nigeria:"african",norway:"nordic",pakistan:"indian",peru:"latin american",philippines:"asian",poland:"european",portugal:"mediterranean",puertorico:"caribbean",qatar:"middle eastern",romania:"european",russianfederation:"eastern european",saudiarabia:"middle eastern",senegal:"african",serbia:"european",singapore:"asian",slovakia:"european",slovenia:"european",southafrica:"african",southkorea:"korean",spain:"spanish",srilanka:"indian",sweden:"nordic",switzerland:"european",syria:"middle eastern",thailand:"thai",tunisia:"african",turkey:"mediterranean",ukraine:"eastern european",unitedarabemirates:"middle eastern",unitedkingdom:"british",unitedstates:"american",uruguay:"latin american",venezuela:"latin american",vietnam:"vietnamese",yemen:"middle eastern",zimbabwe:"african"},a=e.toLowerCase().replace(/\s+/g,""),i=t[a]||"world",n="f39143f6af2943898e57538f2d6d3de2",r=document.getElementById("country-recipes");r&&fetch(`https://api.spoonacular.com/recipes/complexSearch?cuisine=${i}&number=6&apiKey=${n}`).then(o=>o.json()).then(o=>{var c;if(r.innerHTML="",!((c=o.results)!=null&&c.length)){r.innerHTML="<p>No recipes found for this country.</p>";return}o.results.forEach(l=>{const d=document.createElement("div");d.className="recipe-card",d.innerHTML=`
          <h3>${l.title}</h3>
          <img src="${l.image}" alt="${l.title}" width="100%">
        `,r.appendChild(d)})}).catch(o=>console.error("Error loading country recipes:",o))}function j(e){const a=`https://api.spoonacular.com/recipes/complexSearch?query=${e}&number=6&apiKey=f39143f6af2943898e57538f2d6d3de2`;fetch(a).then(i=>i.json()).then(i=>{var r;const n=document.getElementById("search-results");if(n.innerHTML="",!((r=i.results)!=null&&r.length)){n.innerHTML="<p>No recipes found.</p>";return}i.results.forEach(o=>{const c=document.createElement("div");c.className="recipe-card",c.innerHTML=`
          <h3>${o.title}</h3>
          <img src="${o.image}" alt="${o.title}" width="100%">
        `,n.appendChild(c)})}).catch(i=>console.error("Error searching recipes:",i))}window.viewRecipe=e=>{localStorage.setItem("selectedRecipeId",e),window.location.href="recipe.html"};
